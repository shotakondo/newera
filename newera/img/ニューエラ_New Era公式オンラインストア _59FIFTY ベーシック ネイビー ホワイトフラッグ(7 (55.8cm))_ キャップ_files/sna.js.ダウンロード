var recoConstructer,recoConstructor,__snahost;recoConstructor=function(o){var h,g,a,w,r,n,q,c,b,t,m,u,j,e,x,l,i,f,v,p,s,k,d;h=(function(){function y(z,A){if(z==null){z={name:"__sna_s1d",cookieSize:30}}if(A==null){A=""}this.bake=function(){document.cookie=z.name+"="+escape(A)+"; path=/; expires="+new Date("Mon, 31 Dec 2029 23:59:59 GMT").toUTCString();return A};this.knead=function(){return A=this._randobet(z.cookieSize)}}y.prototype._randobet=function(D){var z,A,B,C;z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";z=z.split("");B="";for(A=C=1;1<=D?C<=D:C>=D;A=1<=D?++C:--C){B+=z[Math.floor(Math.random()*z.length)]}return B};return y})();g=(function(){var z,A;function y(){}y.DEFALTRECIPE={name:"__sna_s1d",cookieSize:30};z=function(){return document.cookie.indexOf(y.DEFALTRECIPE.name+"=")};A=function(B){var C;B=B+y.DEFALTRECIPE.name.length+1;C=document.cookie.indexOf(";",B);if(C===-1){C=document.cookie.length}return unescape(document.cookie.substring(B,C))};y.prototype.buy=function(){var C,D,B;B=z();if(B!==-1){C=A(B)}else{D=new h(y.DEFALTRECIPE);D.knead();C=D.bake()}return C};return y})();j=function(y){return y instanceof Array};d=function(B,A){var z,y;z=window.location.href;z=z.replace(/^http[s]*:\/\//,"");if(B===1){z=z.replace(/index\.(html?|php|cgi)(\?.*)?$/,"$2")}if(A){y="&"+A+"[utic]="+B}else{y="&utic="+B}return encodeURIComponent(z)+y+"&"};c=function(y){return encodeURIComponent(y)};a=function(E,z){var A,C,D,B,y;C="";for(A=B=0,y=E.length;B<y;A=++B){D=E[A];C+=n(D,A,z)}return C};l=function(B,y){var z,A,C;A="";for(z in B){C=B[z];A+=n(C,z,y)}return A};n=function(B,z,y){var C,A;A="";C=y+"["+z+"]";if(j(B)){return A+=a(B,C)}else{if(typeof B==="object"){return A+=l(B,C)}else{A+=C+"="+c(B)+"&";if(y==="utic"){A+=z+"[id]="+d(B)}return A}}};u=function(C,D){var I,F,E,H,z,B,A,G,y;H={};E="";if(j(C)){E=D.k;H[E]={str:i({},D)};for(B=0,G=C.length;B<G;B++){z=C[B];H[E].str+="id[]="+c(z)+"&"}}else{if(C.utic!=null){E=C.k||D.k;if(H[E]==null){H[E]={str:i(C,D)}}H[E].str+="id[]="+d(C.utic)}else{if(C.items!=null){F=C.items;for(A=0,y=F.length;A<y;A++){I=F[A];E=I.k||D.k;if(H[E]==null){H[E]={str:i(I,D)}}if(I.utic){H[E].str+="id[]="+d(I.utic)}else{H[E].str+="id[]="+c(I.id)+"&"}}}}}return H};m=function(E,J){var I,O,C,F,G,z,L,H,N,K,A,D,B,M,y;N={};H="";if(j(E)){H=J.k;if(N[H]==null){N[H]=i({},J)}for(F=D=0,M=E.length;D<M;F=++D){A=E[F];K=typeof A;if(K==="string"||K==="number"){N[H]+="items["+F+"][id]="+c(A)+"&"}else{N[H]+=l(A,F)}}}else{if(typeof E==="object"){for(O in E){C=E[O];if(j(C)){G={};for(B=0,y=C.length;B<y;B++){I=C[B];H=I.k||J.k;if(G[H]==null){G[H]=[]}G[H].push(I)}for(L in G){z=G[L];if(N[L]==null){N[L]=i({k:L},J)}delete z.k;N[H]+=a(z,"items")}}else{if(typeof C==="object"){N[H]+=l(C,O)}else{H=E.k||J.k;if(N[H]==null){N[qsk]=i(E,J)}delete E.k;if(O==="utic"){N[H]+="items[u][id]="+d(C,"items[u]")}else{N[H]+=O+"="+C+"&"}}}}}}return N};t=function(D,z,A){var y,C,E,B;B="";E={};for(y in D){C=D[y];if((typeof C==="string")&&(y.search(A)===-1)){B+=y+"="+C+"&"}else{E[y]=C}}return B+l(E,z)};w=function(z,y){return z+="stamp="+y+"&ref="+c(document.referrer)+"&"};b=function(y){if(y==="events"){y="event"}return y};i=function(z,y){var D,A,C,B;B="";C="";for(D in y){A=y[D];if(z[D]!=null){C=z[D]}else{C=A}B+=D+"="+C+"&"}return B};f=function(O,H){var C,N,M,G,Q,J,L,I,U,P,E,B,y,K,R,D,T,A,S,F,z;P=[];I=[];L=0;if(O==null){return}P[L]={};if(O.basic!=null){K=new Date().getTime();R=void 0;B=u(O.basic,H);for(U in B){E=B[U];P[L]={act:"basic",qst:w(E.str,K)};L+=1}delete O.basic}if(O.heavy!=null){B=u(O.heavy,H);for(U in B){E=B[U];P[L]={act:"heavy",qst:E.str};L+=1}delete O.heavy}if(O.heavier!=null){B=m(O.heavier,H);for(U in B){E=B[U];P[L]={act:"heavier",qst:E};L+=1}delete O.heavier}if(O.user!=null){C=i(O.user,H);delete O.user.k;B=C+t(O.user,"user",/^[eaui]\d+$/);P[L]={act:"user",qst:B};L+=1;delete O.user}if(O.events!=null){C=i(O.events,H);delete O.events.k;B=C+t(O.events,"events",/^\d+$/);P[L]={act:"events",qst:B};L+=1;delete O.events}if(O.query!=null){P[L].qst="ref="+c(document.referrer)+"&";B="";F=O.query;for(U in F){T=F[U];if(typeof T==="string"){B+=U+"="+T+"&"}else{B+=l(T,U)}}P[L]={act:"query",qst:B};P[L].qst+=i(O.query,H);delete O.query;L+=1}for(N in O){M=O[N];B="";for(U in M){T=M[U];if(typeof T==="string"){B+=U+"="+T+"&"}else{B+=l(T,U)}}P[L]={act:N,qst:B};P[L].qst+=i(N,H);L+=1}y=new g;Q=y.buy();z=[];for(A=0,S=P.length;A<S;A++){E=P[A];D=location.protocol+"//"+__snahost+"/api/bcon/"+b(E.act)+"?cid="+Q+"&";J=document.createElement("div");J.style.display="none";J.innerHTML='<img src="'+(D+E.qst).replace(/&$/,"")+'" width="0" height="0" />';G=document.getElementsByTagName("body").item(0);z.push(G.appendChild(J))}return z};r=function(z){var y;y={basic:1,heavy:2,heavier:3};return y[z]||1};e=function(B,z,A){var y;if(z==="bcon_type"){return y="bt"+A+r(B)+"&"}else{if(z==="id"){return y=z+A+c(B)+"&"}else{return y=z+A+B+"&"}}};s=function(D,A){var C,z,E,B,y;z="";if(j(D)){C="[]=";for(B=0,y=D.length;B<y;B++){E=D[B];if(E==="utic"){z+="id"+C+d(D)}else{z+=e(E,A,C)}}return z}else{C="=";if(D==="utic"){z+="id"+C+d(D)}return z+=e(D,A,C)}};v=function(B,E,D,C,A,y){var G,F,z;F={};F.qst="";F.act=E;if(!B.target_id){A[C]=E}else{A[C]=B.target_id}if(!B.charset){y[C]=null}else{y[C]=B.charset}for(G in B){z=B[G];F.qst+=s(z,G)}F.qst+=i(B,D);if(E==="rule"||E==="kw"){F.qst+="ref="+c(document.referrer)+"&"}return F};p=function(F,C,y){var B,E,H,A,G,z,D;E=0;A=new g;B=A.buy();D=[];while(E<F.length){z=location.protocol+"//"+__snahost+"/api/recommend/"+F[E].act+"?cid="+B+"&";H=document.createElement("script");H.setAttribute("type","text/javascript");H.setAttribute("charset",y[E]);H.setAttribute("src",(z+F[E].qst).replace(/&$/,""));G=document.getElementById(C[E]);G.appendChild(H);D.push(E++)}return D};k=function(F,G){var A,H,y,D,E,B,z,C,I;E=[];B=[];y=[];D=0;for(A in F){H=F[A];if(j(H)){for(D=C=0,I=H.length;C<I;D=++C){z=H[D];E[D]=v(z,A,G,D,B,y);D+=1}}else{E[D]=v(H,A,G,D,B,y);D++}}if(window.addEventListener){return window.addEventListener("load",(function(){return p(E,B,y)}),false)}else{return window.attachEvent("onload",function(){return p(E,B,y)})}};q={};for(x in o){if(x!=="bcon"&&x!=="recommend"){q[x]=o[x]}}f(o.bcon,q);k(o.recommend,q);this.apiSetCtr=function(A,z,B,y){return apiSetCtrWithQst(A,z,B,y)};return this.apiSetCtrWithQst=function(I,H,F,B,D){var A,C,J,E,y,K,G,z;J=F.href;C=new Image(0,0);K=location.protocol;if(K===undefined){K="https:"}G=Math.floor(Math.random()*10000);z=new g;A=z.buy();E=K+"//"+__snahost+"/api/recommend/set_ctr/?cid="+A+"&id="+I+"&tmpl="+H+"&k="+B+"&r="+G;if(D!=null){E+=D}C.src=E;y=setTimeout((function(){C=null;return location.href=J}),5000);C.onload=function(){location.href=J;return clearTimeout(y)};return C.onerror=function(){location.href=J;return clearTimeout(y)}}};recoConstructer=function(a){return recoConstructor(a)};__snahost="re.veritrans.co.jp";